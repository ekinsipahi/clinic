{% extends "blog/base_blog.html" %}
{% load static %}

{% block blog_content %}

<!-- Kategori Şeridi (aktif highlight’lı) -->
<div class="border-b border-zinc-200 bg-white/80 dark:bg-neutral-950/80 backdrop-blur supports-[backdrop-filter]:backdrop-blur">
  <div class="mx-auto max-w-screen-xl px-4">
    <div class="flex items-center gap-2 py-2 overflow-x-auto no-scrollbar">
      <a href="{% url 'blog:index' %}"
         class="shrink-0 rounded-full px-3 py-1.5 text-sm border
                {% if not active_category_slug %}
                  bg-zinc-900 text-white dark:bg-zinc-100 dark:text-black border-zinc-900 dark:border-zinc-100
                {% else %}
                  border-zinc-200 text-zinc-700 hover:bg-zinc-50 dark:border-zinc-800 dark:text-zinc-200 dark:hover:bg-zinc-900
                {% endif %}">
        Hepsi
      </a>

      {% for c in all_categories %}
        <a href="{{ c.get_absolute_url }}"
           class="shrink-0 rounded-full px-3 py-1.5 text-sm border
                  {% if active_category_slug == c.slug %}
                    bg-zinc-900 text-white dark:bg-zinc-100 dark:text-black border-zinc-900 dark:border-zinc-100
                  {% else %}
                    border-zinc-200 text-zinc-700 hover:bg-zinc-50 dark:border-zinc-800 dark:text-zinc-200 dark:hover:bg-zinc-900
                  {% endif %}">
          {{ c.name }}
        </a>
      {% endfor %}
    </div>
  </div>
</div>

<style>
.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
</style>

<!-- Kartlar -->
<section class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3 mt-6">
  {% for p in posts %}
    <article class="group rounded-2xl border border-zinc-200 bg-white shadow-sm overflow-hidden hover:shadow-md transition">
      <a href="{{ p.get_absolute_url }}" class="block">
        {% if p.card_src %}
          <div class="w-full aspect-[16/9] bg-zinc-100">
            <img
              src="{{ p.card_src }}"
              alt="{{ p.title }}"
              class="w-full h-full object-cover"
              loading="lazy"
              decoding="async"
              fetchpriority="low"
              width="768" height="432">
          </div>
        {% else %}
          <div class="w-full aspect-[16/9] bg-zinc-100"></div>
        {% endif %}
      </a>

      <div class="p-4">
        <a href="{{ p.get_absolute_url }}" class="group">
          <h2 class="text-lg font-semibold text-zinc-900 group-hover:text-black">
            {{ p.title }}
          </h2>
        </a>

        {% if p.excerpt %}
          <p class="mt-2 text-sm text-zinc-600 line-clamp-3">{{ p.excerpt }}</p>
        {% endif %}

        <div class="mt-3 flex items-center gap-3 text-xs text-zinc-500">
          {% if p.category %}
            <a href="{{ p.category.get_absolute_url }}" class="hover:underline">{{ p.category.name }}</a>·
          {% endif %}
          <time datetime="{{ p.published_at|date:'c' }}">{{ p.published_at|date:"d M Y" }}</time>·
          <span>{{ p.reading_time_minutes }} dk okuma</span>
        </div>
      </div>
    </article>
  {% empty %}
    <div class="rounded-2xl border border-zinc-200 bg-white p-6">
      <p>Henüz içerik yok.</p>
      <a class="mt-3 inline-block text-sm text-emerald-700 hover:underline" href="/admin/blog/post/add/">İlk yazını ekle →</a>
    </div>
  {% endfor %}
</section>

{% endblock %}
